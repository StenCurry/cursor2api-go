# 服务器配置
PORT=8002
DEBUG=true

# ============================
# Database Configuration
# ============================
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=cursor2api

# API配置
API_KEY=0000
MODELS=gpt-5,gpt-5-codex,gpt-5-mini,gpt-5-nano,gpt-4.1,gpt-4o,claude-3.5-sonnet,claude-3.5-haiku,claude-3.7-sonnet,claude-4-sonnet,claude-4.5-sonnet,claude-4-opus,claude-4.1-opus,claude-4.5-opus,claude-4.5-haiku,gemini-2.5-pro,gemini-2.5-flash,gemini-3-pro-preview,o3,o4-mini,deepseek-r1,deepseek-v3.1,kimi-k2-instruct,grok-3,grok-3-mini,grok-4,code-supernova-1-million
SYSTEM_PROMPT_INJECT=

# 请求配置
TIMEOUT=30
USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36

# SMTP 邮件配置
# 支持 163、QQ、Gmail 等邮箱
SMTP_HOST=smtp.example.com
SMTP_PORT=465
SMTP_USER=your_email@example.com
SMTP_PASSWORD=your_smtp_password
SMTP_FROM=your_email@example.com

# Cloudflare Turnstile 人机验证
# 获取密钥: https://dash.cloudflare.com/
TURNSTILE_SECRET_KEY=0x4AAAAAAAzLWPuCWMXXXXXX_your_secret_key

# ============================
# OAuth Configuration
# ============================

# Google OAuth
# 获取密钥: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_REDIRECT_URL=http://localhost:8002/api/auth/google/callback

# GitHub OAuth
# 获取密钥: https://github.com/settings/developers
GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret
GITHUB_REDIRECT_URL=http://localhost:8002/api/auth/github/callback

# OAuth State 过期时间（秒）
OAUTH_STATE_EXPIRY=600

# OAuth Token 加密密钥（AES-256，32字节，base64编码）
# 生成方法: 运行 `go run utils/generate_oauth_key.go` 或使用 openssl rand -base64 32
OAUTH_ENCRYPTION_KEY=your_base64_encoded_32_byte_key_here

# 敏感数据加密密钥（AES-256，32字节，base64编码）
# 用于加密 Cursor tokens、API keys 等敏感数据
# 生成方法: openssl rand -base64 32
# 重要: 一旦设置，请勿更改，否则已加密的数据将无法解密！
DATA_ENCRYPTION_KEY=your_base64_encoded_32_byte_key_here

# ============================
# AI Provider Configuration
# ============================

# OpenAI API Configuration
# 获取密钥: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here
# Optional: Custom base URL for OpenAI-compatible APIs
OPENAI_API_BASE=https://api.openai.com/v1

# Anthropic API Configuration
# 获取密钥: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=your_anthropic_api_key_here
# Optional: Custom base URL for Anthropic API
ANTHROPIC_API_BASE=https://api.anthropic.com

# Google AI API Configuration
# 获取密钥: https://aistudio.google.com/app/apikey
GOOGLE_AI_API_KEY=your_google_ai_api_key_here

# DeepSeek API Configuration
# 获取密钥: https://platform.deepseek.com/api_keys
DEEPSEEK_API_KEY=your_deepseek_api_key_here
# Optional: Custom base URL for DeepSeek API
DEEPSEEK_API_BASE=https://api.deepseek.com/v1

# Cursor配置，用这个就行
SCRIPT_URL=https://cursor.com/149e9513-01fa-4fb0-aad4-566afd725d1b/2d206a39-8ed7-437e-a3be-862e0f06eea3/a-4-a/c.js?i=0&v=3&h=cursor.com

# ============================
# Session Security Configuration
# ============================

# Cookie domain (留空使用当前域名，生产环境可设置为 ".yourdomain.com" 支持子域名)
COOKIE_DOMAIN=

# 是否检查会话IP地址（true=启用IP检查，false=禁用）
# 启用后，如果用户IP变化，会话将失效（更安全但可能影响移动用户）
# 建议生产环境启用以防止会话劫持
SESSION_CHECK_IP=true


# ============================
# Quota Management Configuration
# ============================

# Enable/disable quota management system
QUOTA_ENABLED=true

# Default daily token quotas
QUOTA_DEFAULT_FREE=100000      # Free accounts: 100,000 tokens/day
QUOTA_DEFAULT_PRO=500000       # Pro accounts: 500,000 tokens/day

# Quota thresholds
QUOTA_LOW_THRESHOLD=0.8        # Mark as "low" when 80% used

# Daily reset configuration
QUOTA_RESET_HOUR_UTC=0         # Reset at midnight UTC (0-23)

# Token estimation
QUOTA_ESTIMATION_MULTIPLIER=1.5  # Multiplier for safety margin

# Database retry configuration
QUOTA_MAX_RETRIES=3            # Max retries for DB writes
QUOTA_RETRY_BACKOFF_MS=100     # Initial backoff in milliseconds

# ============================
# Usage Tracking Configuration
# ============================

# Enable/disable usage tracking system
# When disabled, no API usage data will be recorded
USAGE_TRACKING_ENABLED=true

# Channel size for async tracking (buffer size)
# Larger values handle traffic spikes better but use more memory
USAGE_CHANNEL_SIZE=1000

# Number of records to batch before writing to database
# Higher values improve write efficiency but increase latency
USAGE_BATCH_SIZE=100

# How often to flush batches to database (seconds)
# Lower values reduce data loss risk but increase DB load
USAGE_FLUSH_INTERVAL=5

# Maximum retry attempts for failed database writes
USAGE_MAX_RETRIES=3

# Initial backoff for retries (milliseconds)
# Actual backoff doubles with each retry attempt
USAGE_RETRY_BACKOFF_MS=100

# Number of days to retain usage records before cleanup
# Minimum value is 7 days
USAGE_RETENTION_DAYS=90

# Hour of day to run cleanup (0-23, UTC)
USAGE_CLEANUP_HOUR=3

# Minute of hour to run cleanup (0-59)
USAGE_CLEANUP_MINUTE=0
